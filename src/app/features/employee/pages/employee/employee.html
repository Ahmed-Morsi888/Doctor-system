<div class="p-8" *transloco="let t; scope: 'employee'">
  <!-- Header -->
  <div class="mb-6 flex items-center justify-between">
    <h1 class="text-2xl font-bold text-gray-900">
      {{ t('employee.title') }} ({{ totalRecords() }})
    </h1>
  </div>

  <!-- Control Bar -->
  <div class="mb-4 flex items-center gap-3 justify-between">
    <!-- Search Input -->
    <div class="flex-1 max-w-1/3">
      <p-iconfield>
        <p-inputicon class="pi pi-search" />
        <input
          type="text"
          pInputText
          [placeholder]="t('employee.searchPlaceholder')"
          [value]="searchValue()"
          (input)="onSearchInput($any($event.target).value)"
          class="w-full"
        />
      </p-iconfield>
    </div>

    <div class="flex gap-4 max-w-1/3">
      <!-- New Employee Button -->
      <p-button
        [label]="t('employee.newEmployee')"
        severity="primary"
        (click)="visible.set(true)"
      />
    </div>
  </div>

  <!-- Employee Table -->
  <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
    <p-table
      [value]="filteredEmployees()"
      [paginator]="false"
      [rows]="rows()"
      [first]="first()"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="text-left font-semibold text-gray-700 p-4">#</th>
          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.name') | titlecase }}
          </th>
          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.role') | titlecase }}
          </th>
          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.email') | titlecase }}
          </th>
          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.phoneNumber') | titlecase }}
          </th>

          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.hireDate') | titlecase }}
          </th>
          <th class="text-left font-semibold text-gray-700 p-4">
            {{ t('employee.status') | titlecase }}
          </th>
          <th class="text-left font-semibold text-gray-700 p-4"></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-employee>
        <tr class="border-b border-gray-100 hover:bg-gray-50 transition-colors">
          <td
            class="p-4 text-gray-900 cursor-pointer hover:text-primary-600"
            (click)="onEmployeeClick(employee.id)"
          >
            {{ employee.id | titlecase }}
          </td>
          <td
            class="p-4 text-gray-900 font-medium cursor-pointer hover:text-primary-600"
            (click)="onEmployeeClick(employee.id)"
          >
            {{ employee.name | titlecase }}
          </td>
          <td class="p-4">
            <p-tag
              [value]="t('employee.roles.' + employee.role.toLowerCase())"
              [severity]="getRoleSeverity(employee.role)"
              [rounded]="true"
            />
          </td>
          <td class="p-4 text-gray-600">{{ employee.email }}</td>
          <td class="p-4 text-gray-600">{{ employee.phoneNumber }}</td>

          <td class="p-4 text-gray-600">{{ employee.hireDate }}</td>
          <td class="p-4">
            <p-tag
              [value]="employee.status"
              [severity]="getStatusSeverity(employee.status)"
              [rounded]="true"
            >
              <span class="flex items-center gap-1.5">
                <span
                  class="w-2 h-2 rounded-full"
                  [class.bg-green-500]="employee.status === 'Active'"
                  [class.bg-gray-400]="employee.status === 'Inactive'"
                ></span>
              </span>
            </p-tag>
          </td>
          <td class="p-4">
            <div class="flex items-center gap-2">
              <button
                type="button"
                (click)="editEmployeeVisible.set(true)"
                class="p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors cursor-pointer"
                [attr.aria-label]="t('employee.edit')"
              >
                <i class="pi pi-pencil text-sm"></i>
              </button>
              <button
                type="button"
                (click)="confirmDelete(employee)"
                class="p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors cursor-pointer"
                [attr.aria-label]="t('employee.delete')"
              >
                <i class="pi pi-trash text-sm"></i>
              </button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td [attr.colspan]="9" class="p-8">
            <div class="flex flex-col items-center justify-center gap-4 py-12">
              <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center">
                <i class="pi pi-users text-3xl text-gray-400"></i>
              </div>
              <div class="text-center">
                <p class="text-lg font-semibold text-gray-700 mb-1">
                  {{ t('employee.noEmployeesFound') }}
                </p>
                <p class="text-sm text-gray-500">
                  {{ t('employee.emptyStateDescription') }}
                </p>
              </div>
              <p-button
                [label]="t('employee.newEmployee')"
                severity="primary"
                (click)="visible.set(true)"
              />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <p-paginator
      [first]="first()"
      [rows]="rows()"
      [totalRecords]="totalRecords()"
      [rowsPerPageOptions]="[10, 20, 50]"
      (onPageChange)="onPageChange($event)"
      class="border-t border-gray-200"
    />
  </div>

  <!-- New Employee Drawer -->
  <p-drawer
    [header]="t('employee.newEmployee')"
    [visible]="visible()"
    (onHide)="visible.set(false)"
    [position]="drawerPosition()"
    [style]="{ width: '30%', 'min-width': '300px' }"
  >
    <p>{{ t('employee.createFormPlaceholder') }}</p>
  </p-drawer>

  <!-- Edit Employee Drawer -->
  <p-drawer
    [header]="t('employee.editEmployee')"
    [visible]="editEmployeeVisible()"
    (onHide)="editEmployeeVisible.set(false)"
    [position]="drawerPosition()"
    [style]="{ width: '30%', 'min-width': '300px' }"
  >
    <p>{{ t('employee.editFormPlaceholder') }}</p>
  </p-drawer>

  <p-toast />
  <p-confirmdialog />
</div>
